<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="This is the Owen programming language specification.">
        <meta name="keywords" content="Owen, programming language, specification, reference">
        <title>Owen specification 0.27.2</title>
        <link rel="icon" type="image/x-icon" href="images/owen.png" />
        <link rel="stylesheet" type="text/css" href="css/global.css">
    </head>
    <body>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="specification.html">Spec</a></li>
                <li><a href="https://github.com/pawwkm/owen">Repo</a></li>
            </ul>
        </nav>
        <main>
            <section>
                <header>
                    <h1>Owen specification 0.27.2</h1>
                    <p>
                        The specification is versioned using <a href="https://semver.org/spec/v2.0.0.html">Semver 2.0</a>.
                        <a href="http://bford.info/pub/lang/peg.pdf">Parser Expression Grammar</a>
                        is used to define the syntax. Files are encoded
                        using UTF-8 and uses the <b>.owen</b> extension.
                    </p>
                </header>

                <p>The design guidelines are:</p>
                
                <ul>
                    <li>Control &gt; language safety.</li>
                    <li>
                        Compiler/spec simplicity &gt; programmer convenience unless 
                        really, really convenient.
                    </li>
                    <li>Compiler/spec simplicity &gt; backwards compatibility.</li>
                    <li>
                        If there is no reasonable default from the spec's perspective
                        it is the programmer's decision.
                    </li>
                </ul>
                
                <blockquote>
                    <p>
                        What remains unsaid is mostly left so intentionally, either 
                        because it is derivable from stated rules of the language, 
                        or because it would unnecessarily restrict the freedom of 
                        implementors.
                    </p>
                    <footer>
                         Niklaus Wirth in <cite><a href="https://people.inf.ethz.ch/wirth/Oberon/Oberon07.Report.pdf">Oberon7 report</a></cite>
                    </footer>
                </blockquote>

                <h1>1. Files</h1>
                <pre><code><span class="rule">file</span> &lt;- <span class="rule">whitespace</span>
        <span class="rule">namespace_directive</span>
        <span class="rule">use_directive</span>*
        <span class="rule">declaration</span>*
        !.

<span class="rule">namespace_directive</span> &lt;- <span class="rule">namespace</span> <span class="rule">upper_case_identifier</span>
<span class="rule">use_directive</span> &lt;- <span class="rule">use</span> <span class="rule">upper_case_identifier</span>

<span class="rule">declaration</span> &lt;- <span class="rule">function_declaration</span>
             / <span class="rule">external_function_declaration</span>
             / <span class="rule">compound_declaration</span>
             / <span class="rule">enumeration_declaration</span>
             / <span class="rule">version_declaration</span>

<span class="rule">upper_case_identifier</span> &lt;- [A-Z][a-z0-9]* (_[A-Z][a-z0-9]*)* <span class="rule">whitespace</span>
<span class="rule">lower_case_identifier</span> &lt;- !<span class="rule">keyword</span> [a-z][a-z0-9]* (_[a-z][a-z0-9]*)* <span class="rule">whitespace</span>
<span class="rule">keyword</span> &lt;- <span class="rule">namespace</span>
         / <span class="rule">use</span>
         / <span class="rule">public</span>
         / <span class="rule">external</span>
         / <span class="rule">function</span>
         / <span class="rule">end</span>
         / <span class="rule">if</span>
         / <span class="rule">elif</span>
         / <span class="rule">else</span>
         / <span class="rule">for</span>
         / <span class="rule">while</span>
         / <span class="rule">break</span>
         / <span class="rule">continue</span>
         / <span class="rule">structure</span>
         / <span class="rule">enumeration</span>
         / <span class="rule">sizeof</span>
         / <span class="rule">union</span>
         / <span class="rule">return</span>
         / <span class="rule">true</span>
         / <span class="rule">false</span>
         / <span class="rule">null</span>
         / <span class="rule">version</span>
        
<span class="rule">namespace</span>   &lt;- 'namespace'   <span class="rule">whitespace</span>
<span class="rule">use</span>         &lt;- 'use'         <span class="rule">whitespace</span>
<span class="rule">public</span>      &lt;- 'public'      <span class="rule">whitespace</span>
<span class="rule">external</span>    &lt;- 'external'    <span class="rule">whitespace</span>
<span class="rule">function</span>    &lt;- 'function'    <span class="rule">whitespace</span>
<span class="rule">end</span>         &lt;- 'end'         <span class="rule">whitespace</span>
<span class="rule">if</span>          &lt;- 'if'          <span class="rule">whitespace</span>
<span class="rule">elif</span>        &lt;- 'elif'        <span class="rule">whitespace</span>
<span class="rule">else</span>        &lt;- 'else'        <span class="rule">whitespace</span>
<span class="rule">for</span>         &lt;- 'for'         <span class="rule">whitespace</span>
<span class="rule">while</span>       &lt;- 'while'       <span class="rule">whitespace</span>
<span class="rule">break</span>       &lt;- 'break'       <span class="rule">whitespace</span>
<span class="rule">continue</span>    &lt;- 'continue'    <span class="rule">whitespace</span>
<span class="rule">structure</span>   &lt;- 'structure'   <span class="rule">whitespace</span>
<span class="rule">enumeration</span> &lt;- 'enumeration' <span class="rule">whitespace</span>
<span class="rule">sizeof</span>      &lt;- 'sizeof'      <span class="rule">whitespace</span>
<span class="rule">union</span>       &lt;- 'union'       <span class="rule">whitespace</span>
<span class="rule">return</span>      &lt;- 'return'      <span class="rule">whitespace</span>
<span class="rule">true</span>        &lt;- 'true'        <span class="rule">whitespace</span>
<span class="rule">false</span>       &lt;- 'false'       <span class="rule">whitespace</span>
<span class="rule">null</span>        &lt;- 'null'        <span class="rule">whitespace</span>
<span class="rule">version</span>     &lt;- 'version'     <span class="rule">whitespace</span>

<span class="rule">whitespace</span>  &lt;- (' ' / '\n' / <span class="rule">comment</span>)*
<span class="rule">comment</span>     &lt;- '//' (!'\n' .)* '\n'?</code></pre>

                <p>
                    The <span class="rule">namespace_directive</span> specifies that
                    all <span class="rule">declaration</span>s in the
                    <span class="rule">file</span> are in the given name
                    space. The <span class="rule">namespace_directive</span> and
                    <span class="rule">use_directive</span> puts all the
                    <span class="keyword">public</span> <span class="rule">declaration</span>s
                    in the given name space in scope of the
                    <span class="rule">file</span>.
                </p>
                
                <h1>2. Declarations</h1>
                <p>
                    If there are multiple <span class="rule">declaration</span>s 
                    in scope that matches, it is an error.
                </p>
                
                <p>
                    A type <span class="rule">declaration</span> with 
                    the same name as a primitive or as another type 
                    <span class="rule">declaration</span> with the same amount
                    of <span class="rule">formal_type_parameters</span> match.
                </p>
                
                <p>
                    <span class="rule">function_declaration</span>s with the
                    same name and <i>n</i>th <span class="rule">formal_parameter</span>'s <span class="rule">type</span>.
                    <span class="rule">formal_type_parameter</span>s differ from <span class="rule">formal_parameter</span> types but 
                    for the purpose of overloading any <span class="rule">formal_type_parameter</span>
                    matches any other <span class="rule">formal_type_parameter</span>.
                </p>

                <h2>2.1. Functions</h2>
                <pre><code><span class="rule">function_declaration</span> &lt;- <span class="rule">public</span>? <span class="rule">function_signature</span>
                            <span class="rule">statements</span>
                        <span class="rule">end</span>

<span class="rule">function_signature</span> &lt;- <span class="rule">function</span>
                      <span class="rule">lower_case_identifier</span>
                      <span class="rule">formal_type_parameters</span>?
                      <span class="rule">formal_parameters</span>
                      <span class="rule">return_types</span>?

<span class="rule">formal_type_parameters</span> &lt;- <span class="rule">left_square_bracket</span>
                          <span class="rule">formal_type_parameter</span>
                          (<span class="rule">comma</span> <span class="rule">formal_type_parameter</span>)*
                          <span class="rule">right_square_bracket</span>

<span class="rule">formal_type_parameter</span> &lt;- <span class="rule">upper_case_identifier</span>
                          
<span class="rule">formal_parameters</span> &lt;- <span class="rule">left_parenthesis</span>
                     <span class="rule">formal_parameter</span>
                    (<span class="rule">comma</span> <span class="rule">formal_parameter</span>)* 
                     <span class="rule">right_parenthesis</span>

<span class="rule">formal_parameter</span> &lt;- <span class="rule">type</span> <span class="rule">lower_case_identifier</span>
                     
<span class="rule">return_types</span> &lt;- <span class="rule">colon</span> <span class="rule">types</span>

<span class="rule">colon</span> &lt;- ':' <span class="rule">whitespace</span></code></pre>

                <p>
                    Declares a function with the <span class="rule">function_signature</span>'s 
                    <span class="rule">lower_case_identifier</span> as the name. <span class="rule">formal_parameters</span> 
                    defines a list of values that callers must pass to the 
                    function. <span class="rule">formal_parameters</span> are in
                    the same scope as the <span class="rule">statements</span>, they must have unique names
                    and they must be used in a <span class="rule">reference_expression</span>.
                    A <span class="rule">formal_parameter</span>'s <span class="rule">type</span>
                    cannot be or contain a non-public type if the function is declared 
                    <span class="rule">public</span>.
                </p> 
                
                <p>
                    A function with <span class="rule">formal_type_parameters</span> is called 
                    a Polymorphic Function otherwise it is a Monomorphic Function. Any reference to the
                    <span class="rule">formal_type_parameters</span>
                    are substituted with <span class="rule">actual_type_parameters</span> when 
                    the function is referenced or called. <span class="rule">formal_type_parameters</span>
                    cannot have the same name as any primitive, enumeration or monomorphic compound in scope
                    and they must be unique.
                </p>
                
                <p>
                    The <span class="rule">function_type</span> of a 
                    <span class="rule">function_declaration</span> is as 
                    follows, the <i>n</i>th <span class="rule">formal_parameter</span>'s 
                    <span class="rule">type</span> is the <i>n</i>th 
                    <span class="rule">type</span> in the <span class="rule">function_type</span>'s
                    <span class="rule">types</span> and the <span class="rule">function_declaration</span>'s 
                    <span class="rule">return_types</span>
                    are equal to the <span class="rule">function_type</span>'s
                    <span class="rule">return_types</span>.
                </p>
                
                <p>
                    <span class="rule">statements</span> must have a
                    <span class="rule">terminating_statement</span> if the function
                    have <span class="rule">return_types</span>.
                </p>    

                <h3>2.1.1. The main function</h3>
                <p>
                    The main function is the entry point of the program
                    and it has one of the function signatures:
                </p>
                
                <pre><code><span class="keyword">function</span> main() : <span class="type">I32</span>
<span class="keyword">function</span> main(#[][]<span class="type">U8</span>) : <span class="type">I32</span></code></pre>

                <h3>2.1.2. Foreign function interface</h3>
                <pre><code><span class="rule">external_function_declaration</span> &lt;- <span class="rule">public</span>? <span class="rule">external</span> <span class="rule">function_signature</span>
                                     <span class="rule">utf8_string_literal</span>
                                     <span class="rule">utf8_string_literal</span></code></pre>
                
                <p>
                    Defines a reference to a C function in a library. The first
                    <span class="rule">utf8_string_literal</span> is the path to the library. 
                    The second <span class="rule">utf8_string_literal</span> is the function's name
                    in said library. Foreign functions cannot return multiple values.
                </p>

                <h2>2.3. Compounds</h2>
                <pre><code><span class="rule">compound_declaration</span> &lt;- <span class="rule">public</span>? (<span class="rule">structure</span> / <span class="rule">union</span>) <span class="rule">upper_case_identifier</span> <span class="rule">formal_type_parameters</span>?
                            <span class="rule">field</span>+
                        <span class="rule">end</span>

<span class="rule">field</span> &lt;- <span class="rule">type</span> <span class="rule">lower_case_identifier</span></code></pre>

                <p>
                    The <span class="rule">upper_case_identifier</span> is the name of the compound.
                    A compound with <span class="rule">formal_type_parameters</span> is called a Polymorphic Compound
                    otherwise it is a Monomorphic Compound.
                    The <i>n</i>th <span class="rule">formal_type_parameter</span>
                    in is replaced by the <i>n</i>th <span class="rule">type</span> in 
                    <span class="rule">actual_type_parameters</span> when the polymorphic compound is referenced.
                </p>
                <p>
                    <span class="rule">field</span> names must be unique within the 
                    <span class="rule">compound_declaration</span> and cannot have 
                    the same name as <span class="rule">compound_declaration</span>.
                    A <span class="rule">field</span>'s <span class="rule">type</span>
                    cannot be or contain a non-public type if the compound is declared 
                    <span class="rule">public</span>. Any attribute besides the 
                    <span class="rule">retained_attribute</span> is allowed for a 
                    <span class="rule">field</span>'s type.
                </p>
                <p>
                    <span class="rule">structure</span> <span class="rule">field</span>s
                    are laid out in memory as they are lexically declared. Padding may be 
                    inserted between fields. The size of the structure is the sum of its
                    <span class="rule">field</span>s and padding.
                </p>

                <p>
                    <span class="rule">union</span> <span class="rule">field</span>s
                    starts at the same address. The size of the union is the size
                    of the largest <span class="rule">field</span>.
                </p>
                
                <h2>2.4. Enumerations</h2>
                <pre><code><span class="rule">enumeration_declaration</span> &lt;- <span class="rule">public</span>? <span class="rule">enumeration</span> <span class="rule">upper_case_identifier</span> <span class="rule">colon</span> <span class="rule">upper_case_identifier</span>
                               <span class="rule">enumeration_constant</span>*
                           <span class="rule">end</span>

<span class="rule">enumeration_constant</span> &lt;- <span class="rule">lower_case_identifier</span> (<span class="rule">assign</span> <span class="rule">expression</span>)?</code></pre>

                <p>
                    The first <span class="rule">upper_case_identifier</span> is the name of the 
                    <span class="keyword">enumeration</span>. The last <span class="rule">upper_case_identifier</span> 
                    is the underlying type of the <span class="keyword">enumeration</span> which must be an 
                    <span class="type">IXX</span> or <span class="type">UXX</span>.
                </p>
                
                <p>
                    Each <span class="rule">enumeration_constant</span> must have an unique 
                    <span class="rule">lower_case_identifier</span> within the declaration.
                    If an <span class="rule">enumeration_constant</span> omits the
                    <span class="rule">expression</span> then it is the value of
                    the last constant + 1. If the first constant omits the
                    <span class="rule">expression</span> then its value is 0.
                    The <span class="rule">expression</span> must be <a href="#constant_expressions">constant</a>.
                </p>

                <h2>2.5. Versions</h2>
                <pre><code><span class="rule">version_declaration</span> &lt;- <span class="rule">version</span> <span class="rule">upper_case_identifier</span>
                           <span class="rule">declaration</span>*
                       <span class="rule">end</span></code></pre>

                <p>
                    Conditionally compiles <span class="rule">declaration</span>s
                    if the <span class="rule">upper_case_identifier</span> has been declared in
                    the command line. The <span class="rule">upper_case_identifier</span> is
                    not part of the program's scope.
                </p>

                <h1>3. Statements</h1>
                <pre><code><span class="rule">statements</span> &lt;- <span class="rule">statement</span>* <span class="rule">terminating_statement</span>?
                
<span class="rule">statement</span> &lt;- <span class="rule">declaration_statement</span>
           / <span class="rule">assignment_statement</span>
           / <span class="rule">expression_statement</span>
           / <span class="rule">if_statement</span>
           / <span class="rule">for_statement</span>
           / <span class="rule">while_statement</span>
           / <span class="rule">version_statement</span>
             
<span class="rule">terminating_statement</span> &lt;- <span class="rule">break_statement</span>
                       / <span class="rule">continue_statement</span>
                       / <span class="rule">return_statement</span></code></pre>

                <p>
                    Each <span class="rule">statement</span> are executed in 
                    lexical order. A terminating statement is either a 
                    <span class="rule">return_statement</span>
                    or <span class="rule">if_statement</span> where the 
                    <span class="keyword">else</span> branch is present and all
                    branches ends with terminating statements.
                </p>

                <h2>3.1. Declaration statements</h2>
                <pre><code><span class="rule">declaration_statement</span> &lt;- <span class="rule">variables</span> (<span class="rule">equal</span> <span class="rule">expressions)?</span>

<span class="rule">equal</span>                 &lt;- '=' <span class="rule">whitespace</span>
<span class="rule">variables</span>             &lt;- <span class="rule">variable</span> (<span class="rule">comma</span> <span class="rule">variable</span>)*
<span class="rule">variable</span>              &lt;- <span class="rule">type</span> <span class="rule">lower_case_identifier</span></code></pre>
 
                <p>
                    Declares <span class="rule">variables</span> in the current 
                    scope with the given <span class="rule">lower_case_identifier</span> 
                    as the name and <span class="rule">type</span>. A 
                    <span class="rule">variable</span> cannot have the same name
                    as anything else in scope. <span class="rule">variables</span> 
                    are evaluated from left to right and exists in scope only after it 
                    has been assigned an <span class="rule">expression</span>. 
                    Each variable must be used in a <span class="rule">reference_expression</span>.
                    If the <span class="rule">equal</span> <span class="rule">expressions</span>
                    part is omitted then all the <span class="rule">variables</span> are 
                    <a href="#zero_values">zeroed</a> otherwise:
                </p>

                <p>
                    A Ballanced assignment consist of the same amount of
                    <span class="rule">expressions</span> on each side of the
                    <span class="rule">assignment_operator</span>.
                    The <i>n</i>th <span class="rule">expression</span>
                    on the right hand side is assigned to the <i>n</i>th
                    <span class="rule">variable</span> on the left hand side.
                </p>
                
                <p>
                    Tuple assignment consist of a <span class="rule">call_expression</span>
                    on the right hand side that returns multiple values and the
                    <i>n</i>th <span class="rule">variable</span> on the left
                    hand side is assigned the <i>n</i>th returned value.
                </p>

                <p>
                    The <i>n</i>th <span class="rule">expression</span>'s
                    type must match the <i>n</i>th <span class="rule">variable</span>'s <span class="rule">type</span>
                    or be inferable as the <i>n</i>th <span class="rule">variable</span>'s <span class="rule">type</span>.
                </p>
                
                <h2>3.2. Assignment statements</h2>
                <pre><code><span class="rule">assignment_statement</span> &lt;- <span class="rule">expressions</span> <span class="rule">assignment_operator</span> <span class="rule">expressions</span>
<span class="rule">assignment_operator</span> &lt;- ([+-*/&amp;|^%] / '&lt;&lt;' / '&gt;&gt;')? <span class="rule">equal</span></code></pre>
    
                <p>
                    <span class="rule">assignment_statement</span> works the same 
                    as <span class="rule">declaration_statement</span> except 
                    that:
                </p>
                
                <ul>
                    <li>
                        Each <span class="rule">expression</span> on the left hand 
                        side must be <a href="#addressable_expressions">addressable</a>.
                    </li>
                    <li>
                        <code>x op= expression</code> is equivalent to 
                        <code>x = x op expression</code> where <code>x</code> 
                        evaluates once.
                    </li>
                    <li>
                        The <i>n</i>th left hand side <span class="rule">expression</span>
                        is evaluated then the <i>n</i>th right hand side 
                        <span class="rule">expression</span> is evaluated going left to right.
                    </li>
                </ul>

                <h2>3.3. Expression statements</h2>
                <pre><code><span class="rule">expression_statement</span> &lt;- <span class="rule">expression</span></code></pre>

                <p>
                    The <span class="rule">expression</span> must be a 
                    <span class="rule">call_expression</span> that returns no 
                    values.
                </p>

                <h2>3.4. If statements</h2>
                <pre><code><span class="rule">if_statement</span> &lt;- <span class="rule">if</span> (<span class="rule">declaration_statement</span> <span class="rule">semicolon</span>)? <span class="rule">expression</span>
                    <span class="rule">statements</span>
               (<span class="rule">elif</span> (<span class="rule">declaration_statement</span> <span class="rule">semicolon</span>)? <span class="rule">expression</span>
                    <span class="rule">statements</span>)*
               (<span class="rule">else</span>
                    <span class="rule">statements</span>)?
                <span class="rule">end</span>

<span class="rule">semicolon</span> &lt;- ';' <span class="rule">whitespace</span></code></pre>

                <p>
                    Each <span class="rule">expression</span> is evaluated in
                    lexical order until one is <span class="keyword">true</span>.
                    The statements following the <span class="rule">expression</span>
                    are then executed. If <span class="rule">expression</span>s
                    are <span class="keyword">false</span> and the else block is
                    defined then its statements are executed.
                </p>

                <p>
                    each <span class="rule">declaration_statement</span> is executed
                    before the following <span class="rule">expression</span>. The
                    declared variables are in the scope of all the following
                    <span class="rule">statements</span> in the
                    <span class="rule">if_statement</span>.
                </p>

                <h2>3.5. For statements</h2>
                <pre><code><span class="rule">for_statement</span> &lt;- <span class="rule">for</span> <span class="rule">declaration_statement</span> <span class="rule">semicolon</span> <span class="rule">expression</span> <span class="rule">semicolon</span> <span class="rule">assignment_statement</span>
                     <span class="rule">statements</span>
                 <span class="rule">end</span></code></pre>

                <p>
                    The <span class="rule">declaration_statement</span> is executed before
                    the first iteration. The declared variables are in the scope of all the following
                    <span class="rule">statements</span>.
                    The <span class="rule">expression</span> is the condition for
                    executing the <span class="rule">statements</span> which must
                    be <span class="keyword">true</span>. The
                    <span class="rule">assignment_statement</span> is executed after each
                    iteration. The <span class="rule">break_statement</span> skips
                    execution of the <span class="rule">assignment_statement</span>.
                </p>

                <h2>3.6. While statements</h2>
                <pre><code><span class="rule">while_statement</span> &lt;- <span class="rule">while</span> (<span class="rule">declaration_statement</span> <span class="rule">semicolon</span>)? <span class="rule">expression</span>
                       <span class="rule">statements</span>
                   <span class="rule">end</span></code></pre>

                <p>
                    The <span class="rule">expression</span> must be of type of
                    <span class="type">Bool</span>. If the
                    <span class="rule">expression</span> is
                    <span class="keyword">true</span>, then the
                    <span class="rule">statements</span> are executed. After the
                    <span class="rule">statements</span> have executed, the
                    expression is evaluated again, and if
                    <span class="keyword">true</span> the
                    <span class="rule">statements</span> are executed again. This
                    continues until the expression is
                    <span class="keyword">false</span>. The
                    <span class="rule">declaration_statement</span> is executed before
                    the first iteration and declared the variables is in the same 
                    scope as <span class="rule">statements</span>.
                </p>

                <h2>3.7. Break statements</h2>
                <pre><code><span class="rule">break_statement</span> &lt;- <span class="rule">break</span></code></pre>

                <p>
                    The <span class="rule">break_statement</span> stops the execution
                    of the innermost loop in which it is declared. Execution resumes
                    after the innermost loop.
                </p>
                
                <h2>3.8. Continue statements</h2>
                <pre><code><span class="rule">continue_statement</span> &lt;- <span class="rule">continue</span></code></pre>

                <p>
                    The <span class="rule">continue_statement</span> begins the 
                    next iteration of the innermost loop in which it is declared.
                </p>

                <h2>3.9. Return statements</h2>
                <pre><code><span class="rule">return_statement</span> &lt;- <span class="rule">return expressions</span>?</code></pre>

                <p>
                    Exits the current function and returns the <span class="rule">expressions</span> to the caller.
                    The <i>n</i>th expression's type must either match the <i>n</i>th return type of the current function or be 
                    inferable as the <i>n</i>th return type of the current function. 
                </p>
            
                <h2>3.10. Version statements</h2>
                <pre><code><span class="rule">version_statement</span> &lt;- <span class="rule">version</span> <span class="rule">upper_case_identifier</span>
                         <span class="rule">statements</span>
                     <span class="rule">end</span></code></pre>
                    
                <p>
                    Works the same way as Version Declarations but for
                    <span class="rule">statements</span>s instead.
                </p>

                <h1>4. Expressions</h1>
                <pre><code><span class="rule">expressions</span> &lt;- <span class="rule">expression</span> (<span class="rule">comma</span> <span class="rule">expression</span>)*
<span class="rule">expression</span>  &lt;- <span class="rule">logical_or_expression</span></code></pre>

                <p>
                    <span class="rule">expressions</span> are evalueated from left to right.
                    <span class="rule">logical_or_expression</span> has the 
                    lowest precedence and <span class="rule">postfix_expression</span> 
                    has the highest precedence. Operators are left associative 
                    unless noted otherwise.
                </p>

                <p id="addressable_expressions">These expressions are adressable:</p>
                <ul>
                    <li><span class="rule">reference_expression</span></li> 
                    <li><span class="rule">field_access_expression</span> unless the compound's type is a <span class="rule">fixed_array_type</span></li>
                    <li><span class="rule">array_access_expression</span></li>
                    <li><span class="rule">dereference_expression</span></li>
                </ul>
               
                <p>
                    If the <span class="rule">expression</span> is not an <span class="rule">address_of_expression</span> and its type is a <span class="rule">pointer_type</span> 
                    that matches the expected type then the expected type must have the same
                    <span class="rule">pointer_type_privileges</span> or less.
                </p>

                <p>
                    Furthermore if the <span class="rule">expression</span> is an <span class="rule">address_of_expression</span>
                    it has the same <span class="rule">pointer_type_privileges</span> as the expected type. But if the expected type has
                    the <span class="rule">retained_privilege</span> and the address is of a <span class="rule">variable</span>
                    or <span class="rule">formal_parameter</span>, including fields and elements, is an error.
                </p>

                <p id="constant_expressions">Expressions consiting of the following are considered constant expressions:</p>
                <ul>
                    <li><span class="rule">float_literal</span></li> 
                    <li><span class="rule">integer_literal</span></li>
                    <li>Binary expressions</li>
                    <li><span class="rule">negate_expression</span></li>
                </ul>


                <h2>4.1. Logical or expressions</h2>
                <pre><code><span class="rule">logical_or_expression</span> &lt;- <span class="rule">logical_and_expression</span> ('||' <span class="rule">whitespace</span> <span class="rule">logical_and_expression</span>)*</code></pre>

                <p>
                    Both operands must be type of <span class="type">Bool</span>.
                    The type of the <span class="rule">logical_or_expression</span> is <span class="type">Bool</span>.
                    The right hand side is not executed if the left hand 
                    side is <span class="keyword">true</span>.
                    The <span class="rule">logical_or_expression</span> is <span class="keyword">true</span>
                    if either operand is <span class="keyword">true</span>.
                </p>

                <h2>4.2. Logical and expressions</h2>
                <pre><code><span class="rule">logical_and_expression</span> &lt;- <span class="rule">relational_expression</span> ('&amp;&amp;' <span class="rule">whitespace</span> <span class="rule">relational_expression</span>)*</code></pre>

                <p>
                    Both operands must be type of <span class="type">Bool</span>.
                    The type of the <span class="rule">logical_and_expression</span> is <span class="type">Bool</span>.
                    The right hand side is not executed if the left hand 
                    side is <span class="keyword">false</span>.
                    The <span class="rule">logical_and_expression</span> is <span class="keyword">true</span>
                    if both operands are <span class="keyword">true</span>.
                </p>

                <h2>4.3. Relational expressions</h2>
                <pre><code><span class="rule">relational_expression</span> &lt;- <span class="rule">additive_expression</span> (('==' / '!=' / '&lt;=' / '&gt;=' / '&lt;' / '&gt;') <span class="rule">whitespace</span> <span class="rule">additive_expression</span>)*</code></pre>
                
                <p>
                    The comparison results in a <span class="type">Bool</span>.
                    The operators are <code>==</code> (equal), <code>!=</code> (not equal),
                    <code>&lt;=</code> (less than or equal), <code>&gt;=</code> (greater than or equal),
                    <code>&lt;</code> (less than) and <code>&gt;</code> (greater than).
                </p>
                
                <p>
                    For <code>==</code> and <code>!=</code> both operands must be of the same primitive, pointer or enumeration type. 
                </p>
                
                <p>
                    For <code>&lt;=</code>, <code>&gt;=</code>, <code>&lt;</code> and <code>&gt;</code>
                    both operands must be of the same number, pointer or enumeration type. 
                </p>

                <h2>4.4. Additive expressions</h2>
                <pre><code><span class="rule">additive_expression</span> &lt;- <span class="rule">multiplicative_expression</span> (('+' / '-' / '|' / '^') <span class="rule">whitespace</span> <span class="rule">multiplicative_expression</span>)*</code></pre>

                <p>
                    If both operands are the same number type the type of the expression is the same as the operands.
                    <code>+</code> (add) and <code>-</code> (subtract) apply to any number type. <code>|</code> (bitwise or) and
                    <code>^</code> (bitwise xor) only applies to <span class="type">IXX</span> and <span class="type">UXX</span>.
                </p>

                <p>
                    If one <span class="rule">multiplicative_expression</span> is a pointer type and the other <span class="rule">multiplicative_expression</span> 
                    is a <span class="type">UXX</span> type and the operator is either <code>+</code> or <code>-</code>
                    then <span class="type">UXX</span> value * size of the base type code is either added or subtracted.
                    The type of the additive expression is the same as the pointer type.
                </p>
                
                <p>
                    If both operands are the same enumeration type then <code>|</code> and <code>^</code> 
                    applies to the underlying value resulting in the same type as the operands.
                </p>
                
                <p>
                    If one of the <span class="rule">multiplicative_expression</span>s are inferable as the other <span class="rule">multiplicative_expression</span>'s 
                    <span class="rule">type</span> then it is inferred as that type.
                </p>

                <h2>4.5. Multiplicative expressions</h2>
                <pre><code><span class="rule">multiplicative_expression</span> &lt;- <span class="rule">prefix_expression</span> (('*' / '/' / '%' / '&amp;' / '&lt;&lt;' / '&gt;&gt;') <span class="rule">whitespace</span> <span class="rule">prefix_expression</span>)*</code></pre>

                <p>
                    If both operands are the same number type the type of the expression is the same as the operands.
                    <code>*</code> (multiply), <code>/</code> (divide), <code>%</code> (modulo), <code>&amp;</code> (bitwise and)
                    <code>&lt;&lt;</code> (left shift) and <code>&gt;&gt;</code> (right shift) applies to <span class="type">IXX</span> 
                    and <span class="type">UXX</span>. <code>*</code>, <code>/</code> and <code>%</code> also applies to <span class="type">FXX</span>.
                </p>

                <p>
                    If both operands are the same enumeration type then <code>&amp;</code> applies to the 
                    underlying value resulting in the same type as the operands.
                </p>

                <p>
                    If one of the <span class="rule">prefix_expression</span>s are inferable as the other <span class="rule">prefix_expression</span>'s 
                    <span class="rule">type</span> then it is inferred as that type.
                </p>

                <h2>4.6. Prefix expressions</h2>
                <pre><code><span class="rule">prefix_expression</span> &lt;- <span class="rule">not_expression</span>
                   / <span class="rule">negate_expression</span>
                   / <span class="rule">address_of_expression</span>
                   / <span class="rule">dereference_expression</span>
                   / <span class="rule">postfix_expression</span></code></pre>

                <p>
                    Prefix operators are right associative.
                </p>

                <h3>4.6.1. Not expressions</h3>
                <pre><code><span class="rule">not_expression</span> &lt;- '!' <span class="rule">whitespace</span> <span class="rule">postfix_expression</span></code></pre>

                <p>
                    Inverts a <span class="type">Bool</span>.
                </p>

                <h3>4.6.2. Negate expressions</h3>
                <pre><code><span class="rule">negate_expression</span> &lt;- '-' <span class="rule">whitespace</span> <span class="rule">postfix_expression</span></code></pre>

                <p>
                    Negates the value of <span class="type">IXX</span> or <span class="type">FXX</span>.
                    The type of the expression is the same as the negated value.
                </p>

                <h3>4.6.3. Address of expressions</h3>
                <pre><code><span class="rule">address_of_expression</span> &lt;- '#' <span class="rule">whitespace</span> <span class="rule">postfix_expression</span></code></pre>

                <p>
                    Takes the address of an <a href="#addressable_expressions">addressable</a> <span class="rule">postfix_expression</span>.
                    The type of the <span class="rule">address_of_expression</span> is a <span class="rule">pointer_type</span> where the 
                    base type is the same type as the <span class="rule">postfix_expression</span>'s type. 
                </p>

                <h3>4.6.4. Dereference expressions</h3>
                <pre><code><span class="rule">dereference_expression</span> &lt;- '@' <span class="rule">whitespace</span> <span class="rule">postfix_expression</span></code></pre>

                <p>
                    Deferences the <span class="rule">postfix_expression</span>.
                    The type of the <span class="rule">dereference_expression</span>
                    is the same as what is the <span class="rule">postfix_expression</span>
                    is pointing to.
                </p>

                <h2>4.7. Postfix expressions</h2>
                <pre><code><span class="rule">postfix_expression</span> &lt;- <span class="rule">primary_expression</span> (<span class="rule">field_access_expression</span> / <span class="rule">call_expression</span> / <span class="rule">array_access_expression</span>)*</code></pre>

                <h3>4.7.1. Field access expressions</h3>
                <pre><code><span class="rule">field_access_expression</span> &lt;- <span class="rule">dot</span> <span class="rule">lower_case_identifier</span>
<span class="rule">dot</span> &lt;- '.' <span class="rule">whitespace</span></code></pre>

                <p>
                    The <span class="rule">lower_case_identifier</span> must be
                    the name of a <span class="rule">field</span>. The type of 
                    the expression is the same the <span class="rule">field</span>'s type.
                </p>

                <h3>4.7.2. Call expressions</h3>
                <pre><code><span class="rule">call_expression</span>   &lt;- <span class="rule">left_parenthesis</span> <span class="rule">actual_parameters</span> <span class="rule">right_parenthesis</span>
<span class="rule">actual_parameters</span> &lt;- <span class="rule">expressions</span>?</code></pre>

                <p>
                    If the <span class="rule">expression</span> being called is not a <span class="rule">reference_expression</span> to a
                    function but has a function type then the <i>n</i>th actual parameter's type must match the <i>n</i>th 
                    <span class="rule">formal_parameter</span>'s type and the 
                    type of the call is the <span class="rule">return_types</span>
                    of the function type. Otherwise the <span class="rule">expression</span>
                    is a <span class="rule">reference_expression</span> to a function and the 
                    type of the call is the <span class="rule">return_types</span> of the resolved function overload.
                    The specific overload is resolved as follows:
                </p>

                <p>
                    With <span class="rule">actual_type_parameters</span> the overload resolves to the polymorphic
                    function with the same name and amount of <span class="rule">formal_type_parameters</span>
                    as there are <span class="rule">actual_type_parameters</span>. The <i>n</i>th 
                    <span class="rule">formal_type_parameter</span> is substituted with the <i>n</i>th
                    <span class="rule">actual_type_parameter</span> and then the <i>n</i>th actual parameter's
                    type matches the <i>n</i>th <span class="rule">formal_parameter</span>'s type.
                </p>
                
                <p>Without <span class="rule">actual_type_parameters</span> the overload resolves to:
                <ol>
                    <li>
                        The monomorphic function with the same name and amount
                        of <span class="rule">formal_parameters</span> where 
                        the <i>n</i>th actual parameter's type matches the 
                        <i>n</i>th <span class="rule">formal_parameter</span>'s
                        type.
                    </li>
                    <li>
                        The polymorphic function with the same name and amount of
                        <span class="rule">formal_parameters</span> where the <i>n</i>th
                        expression's type matches the <i>n</i>th <span class="rule">formal_parameter</span>'s type.
                        The <span class="rule">formal_type_parameters</span> are inferred from
                        the <span class="rule">formal_parameters</span>
                        and <span class="rule">actual_parameters</span> as follows:
                        <ul>
                            <li>
                                If the actual parameter's type is a primitive, enumeration
                                or a monomorphic compound and the formal_parameter's type is a 
                                <span class="rule">formal_type_parameter</span> then that 
                                <span class="rule">formal_type_parameter</span> is inferred to be the actual parameter's 
                                type.
                            </li>
                            <li>
                                If the actual parameter's type and the <span class="rule">formal_parameter</span>'s
                                type match the same polymorphic compound then these rules are applied to the <i>n</i>th <span class="rule">actual_type_parameter</span>
                                and the <i>n</i>th <span class="rule">formal_type_parameter</span> recursively.  
                            </li>
                        </ul>
                    </li>
                </ol>

                <p>The <span class="rule">actual_parameters</span> are passed to the called function by value.</p>

                <h3>4.7.3. Array access expressions</h3>
                <pre><code><span class="rule">array_access_expression</span> &lt;- <span class="rule">left_square_bracket</span> <span class="rule">expression</span> <span class="rule">right_square_bracket</span>

<span class="rule">left_square_bracket</span> &lt;- '[' <span class="rule">whitespace</span>
<span class="rule">right_square_bracket</span> &lt;- ']' <span class="rule">whitespace</span></code></pre>

                <p>
                    The indexed expression must be an array type. The <span class="rule">expression</span> is the
                    index into the array. The <span class="rule">expression</span> must be integer typed, enumeration 
                    typed or an <span class="rule">integer_literal</span> which type is inferred as <span class="type">U32</span>
                </p>
                
                <p>The result is the <i>n</i>th element, starting from 0, which type is the same as the array's base type.</p>

                <h2>4.8. Primary expressions</h2>
                <pre><code><span class="rule">primary_expression</span> &lt;- <span class="rule">float_literal</span>
                    / <span class="rule">integer_literal</span>
                    / <span class="rule">boolean_literal</span>
                    / <span class="rule">unicode_code_point_literal</span>
                    / <span class="rule">utf8_string_literal</span>
                    / <span class="rule">compound_literal</span>
                    / <span class="rule">array_literal</span>
                    / <span class="rule">null_literal</span>
                    / <span class="rule">uninitialized_literal</span>
                    / <span class="rule">size_of_expression</span>
                    / <span class="rule">parenthesized_expression</span>
                    / <span class="rule">reference_expression</span>
                    / <span class="rule">enumeration_constant_access</span>
                    / <span class="rule">cast_expression</span></code></pre>

                <h3>4.8.1. Floating point literals</h3>
                <pre><code><span class="rule">float_literal</span> &lt;- [0-9]+ '.' [0-9]+ <span class="rule">whitespace</span></code></pre>
                
                <p>
                    The type of a <span class="rule">float_literal</span>
                    is inferred. <span class="rule">float_literal</span>s are not allowed to
                    overflow their type.
                </p>

                <h3>4.8.2. Integer literals</h3>
                <pre><code><span class="rule">integer_literal</span>     &lt;- (<span class="rule">binary_integer</span> / <span class="rule">decimal_integer</span> / <span class="rule">hexadecimal_integer</span>) <span class="rule">whitespace</span>

<span class="rule">binary_integer</span>      &lt;- '0b' [01]+ ('_' [01]+)*
<span class="rule">decimal_integer</span>     &lt;- [0-9]+ ('_' [0-9]+)*
<span class="rule">hexadecimal_integer</span> &lt;- '0x' <span class="rule">hexadecimal_digit</span>+ ('_' <span class="rule">hexadecimal_digit</span>+)*
<span class="rule">hexadecimal_digit</span>   &lt;- [0-9A-F]</code></pre>

                <p>
                    The type of a <span class="rule">integer_literal</span> is inferred.
                    The underscore doesn't change the value of the <span class="rule">integer_literal</span>.
                    <span class="rule">integer_literal</span>s are not allowed to
                    overflow their type.
                </p>


                <h3>4.8.3. Boolean literals</h3>
                <pre><code><span class="rule">boolean_literal</span> &lt;- <span class="rule">true</span> / <span class="rule">false</span></code></pre>

                <p>
                    <span class="rule">boolean_literal</span>s are type of
                    <span class="type">Bool</span>.
                </p>
                
                                
                <h3>4.8.4. Unicode code point literals</h3>
                <pre><code><span class="rule">unicode_code_point_literal</span> &lt;- "'" (<span class="rule">unicode_escape_sequence</span> / !"'" .) "'" <span class="rule">whitespace</span>
                
<span class="rule">unicode_escape_sequence</span>    &lt;- '\\u' <span class="rule">hexadecimal_digit</span>
                                    <span class="rule">hexadecimal_digit</span>
                                    <span class="rule">hexadecimal_digit</span>
                                    <span class="rule">hexadecimal_digit</span>
                                 
                            / '\\U' <span class="rule">hexadecimal_digit</span>
                                    <span class="rule">hexadecimal_digit</span>
                                    <span class="rule">hexadecimal_digit</span>
                                    <span class="rule">hexadecimal_digit</span>
                                 
                                    <span class="rule">hexadecimal_digit</span>
                                    <span class="rule">hexadecimal_digit</span>
                                    <span class="rule">hexadecimal_digit</span>
                                    <span class="rule">hexadecimal_digit</span></code></pre>

                <p>
                    The <span class="rule">hexadecimal_digit</span>s in <span class="rule">unicode_escape_sequence</span>
                    represents a unicode code point in a <span class="type">U32</span>.
                </p>

                <h3>4.8.5. UTF-8 string literals</h3>
                <pre><code><span class="rule">utf8_string_literal</span> &lt;- '"' (<span class="rule">unicode_escape_sequence</span> / !'"' .)* '"' <span class="rule">whitespace</span></code></pre>
                
                <p>
                    <span class="rule">utf8_string_literal</span>s are encoded as UTF-8 which are
                    syntax sugar for <code>[]<span class="type">U8</span></code>.
                </p>

                <h3>4.8.6. Compound literals</h3>
                <pre><code><span class="rule">compound_literal</span> &lt;- <span class="rule">left_curly_bracket</span>
                        <span class="rule">field_initializer</span> (<span class="rule">comma</span> <span class="rule">field_initializer</span>)*
                    <span class="rule">right_curly_bracket</span>

<span class="rule">field_initializer</span> &lt;- <span class="rule">lower_case_identifier</span> <span class="rule">equal</span> <span class="rule">expression</span></code></pre>

                <p>
                    Initializes the specified fields of a compound type which is inferred.
                    The <span class="rule">field_initializer</span>'s
                    <span class="rule">lower_case_identifier</span> is the name of the <span class="rule">field</span> to
                    initialize. The <span class="rule">expression</span> is the
                    value of the given <span class="rule">field</span>. The 
                    <span class="rule">type</span> of the <span class="rule">expression</span>
                    must match <span class="rule">field</span>'s <span class="rule">type</span> or 
                    the <span class="rule">expression</span> must be inferable as the 
                    <span class="rule">field</span>'s <span class="rul">type</span>.
                </p>
                
                <p>
                    0 or 1 <span class="rule">field_initializer</span> per <span class="rule">field</span>
                    and uninitialized <span class="rule">field</span>s have <a href="#zero_values">zeroed</a> values.
                </p>

                <h3>4.8.7. Array literals</h3>
                <pre><code><span class="rule">array_literal</span>       &lt;- <span class="rule">left_curly_bracket</span> 
                           <span class="rule">element_initializer</span> (<span class="rule">comma</span> <span class="rule">element_initializer</span>)*
                       <span class="rule">right_curly_bracket</span>
                        
<span class="rule">element_initializer</span> &lt;- (<span class="rule">left_square_bracket</span> (<span class="rule">integer_literal</span> | <span class="rule">enumeration_constant_access</span>) <span class="rule">right_square_bracket</span> <span class="rule">equal</span>)? <span class="rule">expression</span> 

<span class="rule">left_curly_bracket</span>  &lt;- '{' <span class="rule">whitespace</span>
<span class="rule">right_curly_bracket</span> &lt;- '}' <span class="rule">whitespace</span></code></pre>

                <p>
                    Initializes the specified elements of a fixed array which type is inferred. 
                </p>
                
                <p>
                    The <span class="rule">integer_literal</span> or <span class="rule">enumeration_constant_access</span>
                    is an explicit index of the element, starting from 0, to initialize. The explicit index cannot underflow 
                    or overflow the size of the inferred <span class="rule">fixed_array_type</span>. The <span class="rule">integer_literal</span>
                    is inferred as <span class="type">U32</span>.
                    If there is no explicit index then it is implicitly equal to the previous index + 1 or 0 if this is the first
                    <span class="rule">element_initializer</span>.
                    Elements can be initialized once. Elements without an initializer are <a href="#zero_values">zeroed</a>.
                </p>
                
                <p>
                    The <span class="rule">expression</span> is the value of the indexed element
                    and its type is inferred as the array's base type. 
                </p>

                <p></p>
                <h3>4.8.8. Null literals</h3>
                <pre><code><span class="rule">null_literal</span> &lt;- <span class="rule">null</span></code></pre>

                <p>
                    The value is what C dictates on the given platform.
                    Only pointer typed variables can be <span class="keyword">null</span>.
                </p>
                
                <h3>4.8.9. Uninitialized literals</h3>
                <pre><code><span class="rule">uninitialized_literal</span> &lt;- '---' <span class="rule">whitespace</span></code></pre>

                <p>
                    <span class="rule">uninitialized_literal</span> can only be used for declaring a <span class="rule">variable</span>
                    and it must be the whole <span class="rule">expression</span>. It is either assigned to a <span class="rule">variable</span>
                    or returned from a function. The actual value is undefined.
                </p>
                
                <h3>4.8.10. Size of expressions</h3>
                <pre><code><span class="rule">size_of_expression</span> &lt;- <span class="rule">sizeof</span> <span class="rule">left_parenthesis</span> (<span class="rule">type</span> / <span class="rule">expression</span>) <span class="rule">right_parenthesis</span></code></pre>

                <p>
                    <span class="rule">size_of_expression</span> is substituted for an
                    <span class="type">U32</span> of the size of a <span class="rule">type</span>
                    or an <span class="rule">expression</span>'s type in bytes.
                </p>
                
                <h3>4.8.11. Parenthesized expressions</h3>
                <pre><code><span class="rule">parenthesized_expression</span> &lt;- <span class="rule">left_parenthesis</span> <span class="rule">expression</span> <span class="rule">right_parenthesis</span>

<span class="rule">left_parenthesis</span>  &lt;- '(' <span class="rule">whitespace</span>
<span class="rule">right_parenthesis</span> &lt;- ')' <span class="rule">whitespace</span></code></pre>
                <p>
                    The type and value of <span class="rule">parenthesized_expression</span>
                    is the same as the <span class="rule">expression</span>.
                </p>
                
                <h3>4.8.12. Reference expressions</h3>
                <pre><code><span class="rule">reference_expression</span> &lt;- <span class="rule">lower_case_identifier</span> <span class="rule">actual_type_parameters</span>?</code></pre>
                
                <p>
                    <span class="rule">reference_expression</span> refers to a
                    <span class="rule">variable</span>, <span class="rule">formal_parameter</span> 
                    or a <span class="keyword">function</span> with the same 
                    name in scope. If the <span class="rule">reference_expression</span> 
                    refers to a <span class="keyword">function</span> the <span class="rule">type</span> 
                    is inferred.
                </p>
                
                <h3>4.8.13. Enumeration constant access expression</h3>
                <pre><code><span class="rule">enumeration_constant_access</span> &lt;- <span class="rule">upper_case_identifier</span> <span class="rule">dot</span> <span class="rule">lower_case_identifier</span></code></pre>
                <p>
                    <span class="rule">upper_case_identifier</span> is the <span class="keyword">enumeration</span> type and 
                    <span class="rule">lower_case_identifier</span> is the <span class="rule">enumeration_constant</span> on 
                    said <span class="keyword">enumeration</span>. The type of the expression is the same the <span class="keyword">enumeration</span>
                    and the value of the expression is the same as the <span class="rule">enumeration_constant</span>.
                </p>

                <h3>4.8.14. Cast expressions</h3>
                <pre><code><span class="rule">cast_expression</span> &lt;- <span class="rule">type</span> <span class="rule">left_parenthesis</span> <span class="rule">expression</span> <span class="rule">right_parenthesis</span></code></pre>

                <p>
                    Converts the value of <span class="rule">expression</span> 
                    to <span class="rule">type</span>. <span class="keyword">enumeration</span> types act as their underlying type.
                </p>
                
                <ul>
                    <li>When casting an integer type to another integer type
                        <ul>
                            <li>
                                If <span class="rule">type</span> is smaller than 
                                <span class="rule">expression</span>'s type then the 
                                most significant bits of the <span class="rule">expression</span>
                                are truncated and the remaning bits are reinterpreted as
                                the <span class="rule">type</span>.
                            </li>
                            <li>
                                If <span class="rule">type</span> is larger than 
                                <span class="rule">expression</span>'s type then 
                                the value is either Sign extended or Zero extended
                                to the same size as <span class="rule">type</span> then 
                                the bits are reinterpreted as the <span class="rule">type</span>.
                            </li>
                            <li>
                                If <span class="rule">type</span> is the same size as
                                <span class="rule">expression</span>'s type then the 
                                bits are reinterpreted as the <span class="rule">type</span>.
                            </li>
                        </ul>
                    </li>
                    <li>When casting a <span class="type">FXX</span> to <span class="type">FXX</span>
                        <ul>
                            <li>
                                If <span class="rule">type</span> is <span class="type">F64</span>
                                and <span class="rule">expression</span>'s type is <span class="type">F32</span>
                                the <span class="rule">expression</span> is rounded to 
                                the nearest <span class="type">F32</span> value. If the
                                <span class="rule">expression</span> is too low to 
                                represent as <span class="type">F32</span> then the 
                                result is ±0. If the <span class="rule">expression</span> 
                                is too large to represent as <span class="type">F32</span>
                                the result is ±infinity. If the <span class="rule">expression</span>
                                is NaN then the result is NaN.
                            </li>
                            <li>
                                If <span class="rule">type</span> is <span class="type">F32</span>
                                and <span class="rule">expression</span>'s type is 
                                <span class="type">F64</span> the result is a
                                <span class="type">F64</span> representing the same 
                                value as the <span class="rule">expression</span>.
                            </li>
                            <li>
                                If <span class="rule">type</span> is the same as
                                <span class="rule">expression</span>'s type then the
                                result is <span class="rule">expression</span>.
                            </li>
                        </ul>
                    </li>
                    <li>
                        When casting from a <span class="type">FXX</span> to an integer type 
                        the fraction is discarded (truncation towards zero). If
                        the value of the <span class="rule">expression</span> is 
                        NaN, infinite or value doesn't fit in <span class="rule">type</span>
                        the result is undefined.
                    </li>                
                    <li>
                        When casting from an integer type to a <span class="type">FXX</span> 
                        the result is a <span class="type">FXX</span> representing 
                        the same value as the <span class="rule">expression</span>.
                    </li>
                    <li>
                        When the <span class="rule">expression</span> is a 
                        <span class="rule">reference_expression</span> to a
                        <span class="keyword">function</span> then 
                        <span class="rule">type</span> must be a <span class="type">Function</span> type
                        which matches an overload in scope. The <span class="rule">reference_expression</span>
                        is not allowed to specify <span class="rule">actual_type_parameters</span>.
                        The result is a reference to that specific overload. 
                    </li>
                    <li>When the <span class="rule">expression</span>'s type must be inferred it is inferred as the <span class="rule">type</span>.</li>
                </ul>
                
                <h1>5. Types</h1>
                <pre><code><span class="rule">types</span> &lt;- <span class="rule">type</span> (<span class="rule">comma</span> <span class="rule">type</span>)*
<span class="rule">type</span>  &lt;- (<span class="rule">dynamic_array_type</span> / <span class="rule">fixed_array_type</span> / <span class="rule">pointer_type</span>)*
         (<span class="rule">polymorphic_compound_type</span> / <span class="rule">named_type</span> / <span class="rule">function_type</span>)

<span class="rule">polymorphic_compound_type</span> &lt;- <span class="rule">upper_case_identifier</span> <span class="rule">actual_type_parameters</span>
<span class="rule">named_type</span>                &lt;- <span class="rule">upper_case_identifier</span>

<span class="rule">actual_type_parameters</span> &lt;- <span class="rule">left_square_bracket</span> <span class="rule">types</span> <span class="rule">right_square_bracket</span>

<span class="rule">function_type</span> &lt;- 'Function' <span class="rule">whitespace</span>
                  <span class="rule">left_parenthesis types</span>? <span class="rule">right_parenthesis</span>
                  <span class="rule">return_types?</span></code></pre>

                <p>Number types and <span class="type">Bool</span> are considered primitive types and they are always in scope.</p>
                <p>The type following a <span class="rule">dynamic_array_type</span>, <span class="rule">fixed_array_type</span> or <span class="rule">pointer_type</span> is called the base type.</p>

                <h2 id="zero_values">5.1. Zero values</h2>
                <p>The zero value for:</p>
                <ul>
                    <li>Number types is 0.</li>
                    <li><span class="type">Bool</span> is <span class="keyword">false</span>.</li>
                    <li>Pointer types is <span class="keyword">null</span>.</li>
                    <li><span class="keyword">enumeration</span> types is its first <span class="rule">enumeration_constant</span> if any or the zero value of its underlying type.</li>
                    <li>Fields and array elements are zeroed recursively.</li>
                </ul>

                <h2>5.2. Matching types</h2>
                <ul>
                    <li><span class="rule">named_type</span>s with the same names match.</li>
                    <li><span class="rule">polymorphic_compound_type</span>s with the same name and their actual type parameters match.</li>
                    <li><span class="rule">function_type</span>s where the <i>n</i>th <span class="rule">formal_parameters</span> and the <i>n</i>th <span class="rule">return_types</span> match matches.</li>
                    <li><span class="rule">dynamic_array_type</span>s match when their base types match.</li>
                    <li><span class="rule">fixed_array_type</span>s match when their size and base types match.</li>
                    <li><span class="rule">pointer_type</span>s match when their base type match.</li>
                </ul>

                <h2>5.3. Integer types</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Type</th>
                            <th>Min</th>
                            <th>Max</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="type">I8</span></td>
                            <td>-2<sup>7</sup></td>
                            <td>2<sup>7</sup>-1</td>
                        </tr>
                        <tr>
                            <td><span class="type">I16</span></td>
                            <td>-2<sup>15</sup></td>
                            <td>2<sup>15</sup>-1</td>
                        </tr>
                        <tr>
                            <td><span class="type">I32</span></td>
                            <td>-2<sup>31</sup></td>
                            <td>2<sup>31</sup>-1</td>
                        </tr>
                        <tr>
                            <td><span class="type">I64</span></td>
                            <td>-2<sup>63</sup></td>
                            <td>2<sup>63</sup>-1</td>
                        </tr>
                        <tr>
                            <td><span class="type">U8</span></td>
                            <td>0</td>
                            <td>2<sup>8</sup>-1</td>
                        </tr>
                        <tr>
                            <td><span class="type">U16</span></td>
                            <td>0</td>
                            <td>2<sup>16</sup>-1</td>
                        </tr>
                        <tr>
                            <td><span class="type">U32</span></td>
                            <td>0</td>
                            <td>2<sup>32</sup>-1</td>
                        </tr>
                        <tr>
                            <td><span class="type">U64</span></td>
                            <td>0</td>
                            <td>2<sup>64</sup>-1</td>
                        </tr>
                    </tbody>
                </table>

                <p>
                    The number in each type is the number of bits used to store the its data.
                    <span class="type">IXX</span> is stored using Two's complement.
                    <span class="type">IXX</span> and <span class="type">UXX</span>
                    expressions besides literals may wrap around.
                </p>

                <h2>5.4. Floating point types</h2>
                <p>
                    The <span class="type">F32</span> and <span class="type">F64</span>
                    types behaves as binary32 and binary64 respectivly as 
                    specified in IEEE 754.
                </p>

                <h2>5.5. Boolean types</h2>
                <p>
                    Booleans are stored as an <span class="type">U8</span> and have
                    the <span class="type">Bool</span> type. Any non-zero value is
                    <span class="keyword">true</span> and zero is
                    <span class="keyword">false</span>.
                </p>
                
                <h2>5.6. Pointer types</h2>
                <pre><code><span class="rule">pointer_type</span>            &lt;- '#' <span class="rule">whitespace</span> <span class="rule">pointer_type_privileges</span>
<span class="rule">pointer_type_privileges</span> &lt;- <span class="rule">retained_privilege</span>? 
                           <span class="rule">alias_privilege</span>? 
                           <span class="rule">readable_privilege</span>?
                           <span class="rule">writable_privilege</span>?

<span class="rule">retained_privilege</span> &lt;- '`' <span class="rule">whitespace</span>
<span class="rule">alias_privilege</span>    &lt;- '!' <span class="rule">whitespace</span>
<span class="rule">readable_privilege</span> &lt;- '?' <span class="rule">whitespace</span>
<span class="rule">writable_privilege</span> &lt;- '$' <span class="rule">whitespace</span></code></pre>

                <p>A pointer with the <span class="rule">retained_privilege</span> may escape during the call.</p>
                <p>A pointer with the <span class="rule">alias_privilege</span> is assumed to be one of many pointers to its address.</p>
                <p>A pointer with the <span class="rule">readable_privilege</span> allows data to be read through it.</p>
                <p>A pointer with the <span class="rule">writeable_privilege</span> allows data to be written through it.</p>
            
                <h2>5.7. Dynamic array types</h2>
                <pre><code><span class="rule">dynamic_array_type</span> &lt;- <span class="rule">left_square_bracket</span> <span class="rule">right_square_bracket</span></code></pre>
                <p><code>[]<span class="type">T</span></code> behaves as:</p>
                <pre><code><span class="keyword">structure</span> <span class="type">Dynamic_Array</span>&lt;<span class="type">Base_Type</span>&gt; 
    #<span class="type">Base_Type</span> elements
    <span class="type">U32</span> length
    <span class="type">U32</span> capacity
<span class="keyword">end</span></code></pre>

                <p>
                    but without putting 
                    <code><span class="type">Dynamic_Array</span>&lt;<span class="type">Base_Type</span>&gt;</code> 
                    in scope.
                </p>
                
                <h2>5.8. Fixed array types</h2>
                <pre><code><span class="rule">fixed_array_type</span> &lt;- <span class="rule">left_square_bracket</span> <span class="rule">integer_literal</span> <span class="rule">right_square_bracket</span></code></pre>
                <p>
                    Is a fixed sized array of <span class="type">Base_Type</span> with 
                    <span class="rule">integer_literal</span> &gt; 0 elements stored 
                    contiguously without padding between elements. Its <span class="type">U32</span>
                    length field is equal to the <span class="rule">integer_literal</span>.
                </p>
            </section>
        </main>
    </body>
</html>
